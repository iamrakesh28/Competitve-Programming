if (self.CavalryLogger) { CavalryLogger.start_js(["+FPrY"]); }

__d("CampfireByline.react",["cx","DOMContainer.react","FDSText.react","ImageBlock.react","Link.react","React","cssURL"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=null;this.props.privacyMarkup&&(a=b("React").createElement("span",{className:"_4_mf"},b("React").createElement(b("DOMContainer.react"),null,this.props.privacyMarkup)));var c=null;this.props.permalinkURI?c=b("React").createElement("a",{href:this.props.permalinkURI,className:"uiLinkSubtle"},this.props.dateString):c=this.props.dateString;var d=null;this.props.viewCount&&(d=b("React").createElement("span",{className:"_5q4y"},b("React").createElement(b("DOMContainer.react"),null,this.props.viewCount)));return b("React").createElement(b("ImageBlock.react"),{className:"_2yud"},b("React").createElement("div",{className:"_2yuf",style:{backgroundImage:b("cssURL")(this.props.authorProfilePicURI)}}),b("React").createElement("div",{className:"_3uhg"},this.props.authorProfileURI?b("React").createElement(b("Link.react"),{className:"_2yug",href:this.props.authorProfileURI,target:"_blank"},this.props.authorName):b("React").createElement(b("FDSText.react"),{color:"secondary"},this.props.authorName),b("React").createElement("span",{className:"_4_mg"},"\xb7"),c,a,d))};return c}(b("React").Component);c.propTypes={authorName:a.string.isRequired,authorProfileURI:a.string,authorProfilePicURI:a.string.isRequired,dateString:a.string.isRequired,permalinkURI:a.string,privacyMarkup:a.object,viewCount:a.object};e.exports=c}),null);
__d("canEditNote",["UserAgent"],(function(a,b,c,d,e,f){d=typeof a.getSelection==="function";var g=d&&(b("UserAgent").isPlatform("Linux")||b("UserAgent").isPlatform("Mac OS X")||b("UserAgent").isPlatform("Windows")||b("UserAgent").isPlatform("Chrome OS"))&&(b("UserAgent").isBrowser("IE >= 10")||b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Edge >= 12")||b("UserAgent").isBrowser("Firefox >= 16")||b("UserAgent").isBrowser("Opera >= 12")||b("UserAgent").isBrowser("Safari >= 5"));function c(){return g}e.exports=c}),null);
__d("XPageStoryComposerOnlyPublishController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/page/story/composer/onlypublish/",{page_story_id:{type:"FBID"},__asyncDialog:{type:"Int"}})}),null);
__d("PageStoryReader.react",["ix","cx","fbt","ActorURI","CampfireByline.react","CssBackgroundImage.react","Image.react","PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","React","UnicodeBidi","UnicodeBidiDirection","Video.react","XPageStoryComposerOnlyPublishController","XUIButton.react","XUIGrayText.react","XUIOverlayButton.react","XUIText.react","asset","canEditNote","suiMargin","uniqueID"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("UnicodeBidiDirection").LTR,k=b("UnicodeBidiDirection").RTL,l=b("canEditNote")();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={waitingToEdit:!1},d.$1=function(){d.props.onEdit&&d.setState({waitingToEdit:!0},d.props.onEdit)},d.$2=function(){b("PagesLogger").log(d.props.pageID,b("PagesLoggerEventEnum").CLICK,b("PagesLoggerEventTargetEnum").PAGE_STORY_PUBLISH,"story_composer",["pages_surface_team"],{page_story_id:d.props.pageID})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=null,c=this.props.coverMediaInfo;if(c)if(c.type==="photo"){var d=c.xOffset,e=c.yOffset;a=b("React").createElement(b("CssBackgroundImage.react"),{backgroundPosition:d.toString()+"% "+e.toString()+"%",className:"_60y2",imageURI:c.coverPhotoURI})}else c.type==="video"&&(a=b("React").createElement(b("Video.react"),{height:"100%",poster:c.posterSrc,src:c.videoSrc,width:"100%"}));d=null;if(this.props.canEdit){e=b("XPageStoryComposerOnlyPublishController").getURIBuilder().setFBID("page_story_id",this.props.storyID).getURI();e=b("ActorURI").create(e,this.props.pageID);c=i._("Click the \"Publish\" button to publish. Editing is not available in this browser.");var f=null;l&&(c=i._("Click the \"Publish\" button to publish or \"Edit\" to make more changes."),f=b("React").createElement(b("XUIButton.react"),{className:"_3-9b _3aal",disabled:this.state.waitingToEdit,label:i._("Edit"),onClick:this.$1,size:"xlarge",use:"default"}));d=b("React").createElement("div",{className:"_3aam"},b("React").createElement(b("XUIGrayText.react"),{display:"block",shade:"medium"},i._("This is a preview of your story.")),b("React").createElement(b("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"light"},c),b("React").createElement("div",{className:"_3-8y"},b("React").createElement(b("XUIButton.react"),{className:"_3aal",href:e.toString(),label:i._("Publish"),onClick:this.$2,rel:"async-post",size:"xlarge",use:"confirm"}),f))}c=null;if(this.props.canEdit){e=b("React").createElement(b("Image.react"),{src:g("363757")});l?c=b("React").createElement("div",{className:"_3aan"},b("React").createElement(b("XUIOverlayButton.react"),{disabled:this.state.waitingToEdit,image:e,label:i._("Edit Story"),onClick:this.$1})):c=b("React").createElement("div",{className:"_3aan"},b("React").createElement(b("XUIOverlayButton.react"),{disabled:!0,image:e,label:i._("Editing is not available in this browser")}))}f="_4lmi _3aao"+(this.props.coverMediaInfo?"":" _3aas");e=b("UnicodeBidi").getDirection(this.props.title);e="_4lmk"+(e===j?" _2vxa":"")+(e===k?" _2vxb":"")+" autofocus";var h=b("uniqueID")();return b("React").createElement("div",{"aria-labelledby":h,className:f,role:"dialog"},a,b("React").createElement("div",{className:"_39k2"},b("React").createElement(b("XUIText.react"),{className:e,display:"block",id:h,tabIndex:-1,type:"serif"},this.props.title),b("React").createElement(b("CampfireByline.react"),{authorName:this.props.authorInfo.name,authorProfilePicURI:this.props.authorInfo.profilePicURI,authorProfileURI:this.props.authorInfo.profileURI,dateString:this.props.authorInfo.dateString,permalinkURI:this.props.permalinkURI})),b("React").createElement(b("XUIText.react"),{className:"_39k5",display:"block",type:"serif"},this.props.children),b("React").createElement("div",{className:"_3aat"},d),c)};return c}(b("React").Component);e.exports=a}),null);
__d("TypewriterLayer",["cx","fbt","CSS","DOM","DOMContainer.react","Layer","LayerAutoFocus","LayerButtons","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnBlur","LayerTabIsolation","ModalLayer","React","ReactDOM","UserAgent","XUICloseButton.react","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("UserAgent").isBrowser("IE");a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d._getDefaultBehaviors=function(){return a.prototype._getDefaultBehaviors.call(this).concat([b("LayerAutoFocus"),b("LayerButtons"),b("LayerFadeOnHide"),b("LayerFadeOnShow"),b("LayerHideOnBlur"),b("LayerTabIsolation"),b("ModalLayer")])};d._buildWrapper=function(a,d){this._inner=b("DOM").create("div",{className:"_5g03"+(i?" _e_c":"")},d);a=b("DOM").create("div",{className:b("joinClasses")("_4-hy _29a3",(d=a)!=null?d.className:d)});b("CSS").addClass(document.body,c.bodyClass);b("ReactDOM").render(b("React").createElement("div",null,b("React").createElement(b("XUICloseButton.react"),{className:"_5ezf layerCancel",size:"medium",shade:"light",label:h._("Close Note")}),b("React").createElement(b("DOMContainer.react"),{display:"block"},this._inner)),a);return a};d.getContentRoot=function(){return this._inner};d.updatePosition=function(){return!0};d.destroy=function(){a.prototype.destroy.call(this),b("CSS").removeClass(document.body,c.bodyClass)};return c}(b("Layer"));a.bodyClass="_29a4";e.exports=a}),null);
__d("PageStoryReaderOverlay",["ActorURI","AsyncRequest","DOM","DOMContainer.react","LayerDestroyOnHide","LayerHideOnEscape","LayerHideOnTransition","LayerRefocusOnHide","PageStoryReader.react","PageTransitions","React","ReactDOM","TypewriterLayer","URI","XPageStoryComposerController","goURI"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.$13=function(){e.$7.show()};this.$1=a;this.$2=c;this.$3=d;this.$4=b("DOM").create("div");this.$5=b("URI").getRequestURI();this.$6=null;this.$7=new(b("TypewriterLayer"))({addedBehaviors:[b("LayerDestroyOnHide"),b("LayerHideOnEscape"),b("LayerHideOnTransition"),b("LayerRefocusOnHide")],causalElement:d.causalElement},this.$4);this.$7.subscribe("hide",this.$8.bind(this));this.$9();!this.$3.canEdit&&this.$3.published&&(this.$10=Date.now())}var c=a.prototype;c.$8=function(){__p&&__p();var a=this;b("PageTransitions").removeHandler(this.$11);this.$11=null;var c=function c(d){var e=a.$5;a.$5=null;b("PageTransitions").removeHandler(c);if(e.getPath()===d.getPath()){b("PageTransitions").transitionComplete(!0);return!0}return!1};b("PageTransitions").registerHandler(c);b("goURI")(this.$5)};c.$12=function(){var a=this,c=this.$1,d=b("XPageStoryComposerController").getURIBuilder().getURI();d=b("ActorURI").create(d,c);new(b("AsyncRequest"))(d).setData({page_id:c,page_story_id:this.$2}).setMethod("POST").setHandler(function(){a.$7.hide()}).send()};c.$9=function(){b("ReactDOM").render(b("React").createElement(b("PageStoryReader.react"),{authorInfo:this.$3.authorInfo,canEdit:this.$3.canEdit,coverMediaInfo:this.$3.coverMediaInfo,onEdit:this.$12.bind(this),ownerID:this.$3.authorInfo.ownerID,pageID:this.$1,permalinkURI:this.$3.permalinkURI,storyID:this.$2,title:this.$3.title},b("React").createElement(b("DOMContainer.react"),{display:"block"},this.$3.documentMarkup)),this.$4,this.$13)};return a}();e.exports=a}),null);