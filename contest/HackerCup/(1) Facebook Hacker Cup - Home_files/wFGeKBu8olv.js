if (self.CavalryLogger) { CavalryLogger.start_js(["fL\/hW"]); }

__d("LiveVideoClippingHeatMap.react",["cx","React","uniqueID"],(function(a,b,c,d,e,f,g){__p&&__p();a=50;var h=5,i=a-h,j=-h/2,k=10,l=2,m=1,n=100;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.scalePointToLength=function(a,b){var c=Math.sqrt(a.x*a.x+a.y*a.y);a.x*=b/c;a.y*=b/c};d.getBorderRadiusArcDeltaGivenTangentCartesian=function(a){if(a.x==0)throw new TypeError("Tangent vector cannot be vertical");var b=a.x>0,c=b?a.x:-a.x;a=a.y;var d=Math.sqrt(c*c+a*a);a=l*(1+a/d);c=-l*c/d;return{x:b?a:-a,y:c}};d.getBorderRadiusArcDeltaGivenTangent=function(a){a=this.getBorderRadiusArcDeltaGivenTangentCartesian({x:a.x,y:-a.y});a.y*=-1;return a};d.getInvertedPoint=function(a){return{x:-a.x,y:-a.y}};d.getHeatmapPathData=function(a){__p&&__p();if(!this.props.interestLevels||this.props.interestLevels===null)return null;if(this.props.interestLevels.length<2)return null;var b=[];a=a/(this.props.interestLevels.length-1);var c=i/n;for(var d=0;d<this.props.interestLevels.length;d++){var e=d*a,f=j-this.props.interestLevels[d]*c;b.push({x:e,y:f})}e=a/2*m;f=[];for(var d=0;d<b.length;d++){var g;d==0?(c=b[d+1].x-b[d].x,g=b[d+1].y-b[d].y):d==b.length-1?(c=b[d].x-b[d-1].x,g=b[d].y-b[d-1].y):(c=b[d+1].x-b[d-1].x,g=b[d+1].y-b[d-1].y);c={x:-c,y:-g};this.scalePointToLength(c,e);f.push(c)}g={x:b[0].x,y:b[0].y};c="";d=this.getBorderRadiusArcDeltaGivenTangent(f[0]);a>Math.abs(d.x)&&(b[0].x-=d.x,g.y+=d.y,c="A "+l+" "+(l+", ")+"0, 0, 1, "+(b[0].x+" "+b[0].y+" "));e={x:b[b.length-1].x,y:b[b.length-1].y};d="";var h=this.getBorderRadiusArcDeltaGivenTangent(this.getInvertedPoint(f[f.length-1]));a>h.x&&(b[b.length-1].x-=h.x,e.y+=h.y,d="A "+l+" "+(l+", ")+"0, 0, 1, "+(e.x+" "+e.y+" "));a=[];for(var h=0;h<b.length-1;h++){if(h==0){var k={x:b[0].x-f[0].x,y:b[0].y-f[0].y},o={x:b[1].x+f[1].x,y:b[1].y+f[1].y};a.push("C "+k.x+" "+k.y+", "+(o.x+" "+o.y+", ")+(b[1].x+" "+b[1].y));continue}k={x:b[h+1].x+f[h+1].x,y:b[h+1].y+f[h+1].y};a.push("S "+k.x+" "+k.y+", "+(b[h+1].x+" "+b[h+1].y))}o=10;return"M "+g.x+" "+o+(" L "+g.x+" "+g.y+" ")+c+a.join(" ")+" "+d+("L "+e.x+" "+o)};d.getBottomHalfScrubberBarData=function(a){return"M 0 0 "+("L 0 "+(h/2-l)+" ")+("A "+l+" ")+(l+", ")+"0, 0, 0, "+(l+" ")+(h/2+" ")+("L "+(a-l)+" ")+(h/2+" ")+("A "+l+" ")+(l+", ")+"0, 0, 0, "+(a+" "+(h/2-l)+" ")+("L "+a+" 0")};d.getTopHalfScrubberBarData=function(a){return"M 0 0 "+("L 0 "+-(h/2-l)+" ")+("A "+l+" ")+(l+", ")+"0, 0, 1, "+(l+" ")+(-h/2+" ")+("L "+(a-l)+" ")+(-h/2+" ")+("A "+l+" ")+(l+", ")+"0, 0, 1, "+(a+" "+-(h/2-l)+" ")+("L "+a+" 0")};d.render=function(){__p&&__p();if(!this.props.interestLevels)return b("React").createElement("div",null);var a=b("uniqueID")(),c=this.props.width,d=this.getHeatmapPathData(c),e=this.getBottomHalfScrubberBarData(c),f=this.getTopHalfScrubberBarData(c),g="liveHeatmapClipPathWidth"+c+"ID"+a,j="url(#"+g+")";j=b("React").createElement("rect",{height:k+i+h/2,y:-(k+i+h/2),clipPath:j});c="liveHeatmapScrubberClipPathWidth"+c+"ID"+a;a="url(#"+c+")";a=b("React").createElement("rect",{height:h/2,y:0,clipPath:a});var l=[];for(var m=0;m<this.props.displayRanges.length-1;m++){var n={x:this.props.displayRanges[m],width:this.props.displayRanges[m+1]-this.props.displayRanges[m],className:this.props.displayRangeCSS[m],key:""};n.key="scruuber_toprect_"+m;l.push(b("React").cloneElement(j,n));n.key="scruuber_botrect_"+m;l.push(b("React").cloneElement(a,n))}return b("React").createElement("svg",{className:"_84mo"},b("React").createElement("defs",null,b("React").createElement("clipPath",{id:g},b("React").createElement("path",{d:d}),b("React").createElement("path",{d:f})),b("React").createElement("clipPath",{id:c},b("React").createElement("path",{d:e}))),l)};return c}(b("React").Component);e.exports=c}),null);